{"version":3,"sources":["webpack:///webpack/bootstrap db6fe92734c4e50e47d6","webpack:///./arduz-web.ts","webpack:///./js/adz/mzengine/mzengine.ts","webpack:///./js/adz/mzengine/window.ts","webpack:///./js/adz/ui/loadingGame.ts","webpack:///./js/adz/mzengine/textures.ts","webpack:///./js/adz/net/client.ts","webpack:///./common/protocol.ts","webpack:///(webpack)/~/node-libs-browser/~/events/events.js","webpack:///./common/packet.ts","webpack:///./common/packets.ts","webpack:///./js/adz/game/grh.ts","webpack:///./js/adz/game/body.ts","webpack:///./js/adz/game/head.ts","webpack:///./js/adz/game/input.ts","webpack:///./js/adz/mzengine/input.ts","webpack:///./js/adz/mzengine/camera.ts","webpack:///./js/adz/mzengine/map.ts","webpack:///./js/adz/game/char.ts","webpack:///./js/adz/game/hud.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL,EAAC;AACD;AACA,0BAAyB,6BAA6B,EAAE;;;;;;;ACrFxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,qCAAqC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC/HA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,oCAAmC,YAAY,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7DA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC,mEAAmE;;;;;;;ACtBpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACzSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,kDAAkD;AACnD;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;;;;;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACvDD;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,4CAA4C,EAAE;AACxF,yCAAwC,0CAA0C,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,kBAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpHA;AACA,iI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,YAAY;AACpC,6BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,YAAY;AACpC,6BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA,qBAAoB,mBAAmB;AACvC,yBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,wBAAuB,kBAAkB;AACzC,4BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,wBAAwB;AAChE,6CAA4C,wBAAwB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA,cAAa;AACb;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,aAAa;AACxC,gCAA+B,aAAa;AAC5C;AACA;AACA;AACA;AACA,2CAA0C,SAAS;AACnD;AACA;AACA;;AAEA;;AAEA,2CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,IAAG;;;;;;;AC9NH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;AACb,wCAAuC,qBAAqB,EAAE;AAC9D;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap db6fe92734c4e50e47d6\n **/","\"use strict\";\nvar engine = require('./js/adz/mzengine/mzengine');\nvar lg = require('./js/adz/ui/loadingGame');\nvar client = require('./js/adz/net/client');\nfunction RequireList() {\n    var rlcount = 0;\n    var pending = 0;\n    var onEnd = null;\n    var terminado = false;\n    var ret = mz.copy(function (cb) {\n        rlcount++;\n        pending++;\n        var done = false;\n        terminado = false;\n        return function () {\n            cb && cb.apply(null, arguments);\n            if (done == false) {\n                pending--;\n                if (pending == 0) {\n                    terminado = true;\n                    onEnd && onEnd();\n                }\n            }\n        };\n    }, {\n        onEnd: function (onend) {\n            onEnd = onend;\n            if (terminado) {\n                onEnd && onEnd();\n            }\n        }\n    });\n    return ret;\n}\nvar requireList = RequireList;\n$(function () {\n    engine.init(document.getElementById('juego'));\n    lg.show();\n    var requireListGameEngine = requireList();\n    var cbGraficos = requireListGameEngine(function () {\n        console.info('Graficos cargados!');\n    });\n    var cbCuerpos = requireListGameEngine(function () {\n        console.info('Cuerpos cargados!');\n    });\n    var cbCabezas = requireListGameEngine(function () {\n        console.info('Cabezas cargados!');\n    });\n    var cbCascos = requireListGameEngine(function () {\n        console.info('Cascos cargados!');\n    });\n    require('./js/adz/game/grh').cargarGraficosRaw('cdn/indexes/graficos.txt', cbGraficos);\n    require('./js/adz/game/body').loadRaw('cdn/indexes/cuerpos.txt', cbCuerpos);\n    var heads = require('./js/adz/game/head');\n    heads.loadHeadsRaw('cdn/indexes/cabezas.txt', cbCabezas);\n    heads.loadHelmetsRaw('cdn/indexes/cascos.txt', cbCascos);\n    requireListGameEngine.onEnd(function () {\n        console.log('-------------- Indices cargados --------------');\n        require('./js/adz/game/input');\n        console.log('Cargado el input');\n        require('./js/adz/game/hud');\n        console.log('Cargado el hud');\n        var Camera = require('./js/adz/mzengine/camera');\n        engine.cameraInitialized(Camera);\n        var char = require('./js/adz/game/char');\n        Camera.observable.on('moveByHead', function (heading, x, y) {\n            char.mainChar && char.mainChar.moveByHead(heading);\n        });\n        var map = require('./js/adz/mzengine/map');\n        engine.mapInitialized(map);\n        map.loadMap(null, function () {\n            var myChara = char.BodyFactory(1, 5, 45);\n            char.chars.push(myChara);\n            setInterval(function () {\n                myChara.moveByHead(((Math.random() * 700) % 4) | 0);\n            }, 192);\n            var mainChar = char.BodyFactory(1, 4, 45);\n            mainChar.body.name = \"menduz\";\n            char.chars.push(mainChar);\n            char.mainChar = mainChar;\n            lg.hide();\n        });\n    });\n});\nclient.connect(\"mz\");\nsetInterval(function () { return client.connect(\"mz\"); }, 3000);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./arduz-web.ts\n ** module id = 0\n ** module chunks = 0\n **/","\"use strict\";\nvar win = require('./window');\nvar elapsedTime = 0;\nvar map = null, cam = null;\nvar timer = mz.now;\nvar ctx = null, octx = null;\nvar canvas = null;\nvar lastTime = null, frameCount = 0, realFPS = 0;\nvar width = 0;\nvar height = 0;\nvar size = {\n    width: width,\n    height: height\n};\nvar lastRender = null;\nvar setSize = function (w, h) {\n    width = w;\n    height = h;\n    size.width = w;\n    size.height = h;\n    canvas.width = w;\n    canvas.height = h;\n};\nfunction render() {\n    requestAnimationFrame(render);\n    clearScreen();\n    var nowTime = exports.tick = timer();\n    elapsedTime = nowTime - lastRender;\n    lastRender = nowTime;\n    var diffTime = nowTime - lastTime;\n    if (diffTime >= 1000) {\n        realFPS = frameCount;\n        frameCount = 0;\n        lastTime = nowTime;\n    }\n    frameCount++;\n    if (cam) {\n        ctx.save();\n        ctx.transformado = true;\n        cam.update(elapsedTime);\n        map && map.render(elapsedTime);\n        ctx.restore();\n        ctx.transformado = false;\n        win && win.render();\n        exports.renderHud && exports.renderHud();\n    }\n    drawFPS(elapsedTime);\n}\nfunction clearScreen() {\n    ctx.clearRect(0, 0, width, height);\n}\nfunction drawText(text, x, y, centered, color) {\n    if (text && x != void 0 && y != void 0) {\n        ctx.save();\n        if (centered) {\n            ctx.textAlign = \"center\";\n        }\n        ctx.fillStyle = color || \"white\";\n        ctx.fillText(text, x | 0, y | 0);\n        ctx.restore();\n    }\n}\nexports.drawText = drawText;\nfunction renderTextCentered(text, x, y, color) {\n    drawText(text, x, y, true, color);\n}\nexports.renderTextCentered = renderTextCentered;\nfunction drawTextStroked(text, x, y, centered, color, strokeColor) {\n    if (text && x && y) {\n        ctx.save();\n        if (centered) {\n            ctx.textAlign = \"center\";\n        }\n        ctx.strokeStyle = strokeColor || \"#373737\";\n        ctx.lineWidth = 1;\n        ctx.strokeText(text, x, y);\n        ctx.fillStyle = color || \"white\";\n        ctx.fillText(text, x, y);\n        ctx.restore();\n    }\n}\nexports.drawTextStroked = drawTextStroked;\nfunction drawFPS(elapsedTime) {\n    drawText(\"FPS: \" + realFPS + \" - \" + Math.round(1000 / elapsedTime), 40, 30, false);\n}\nexports.tick = 0;\nexports.init = function (_canvas, w, h) {\n    canvas = _canvas;\n    octx = ctx = canvas.getContext('2d');\n    this.drawImage = function () { ctx.drawImage.apply(ctx, arguments); };\n    setSize(w || 800, h || 600);\n    lastTime = timer();\n    lastRender = lastTime;\n    render();\n};\nexports.getSize = function () {\n    return size;\n};\nexports.drawImage = function () { };\nexports.renderThisUI = function (fn) {\n    ctx.save();\n    if (ctx.transformado) {\n        cam && cam.unstranslate();\n    }\n    try {\n        fn(ctx);\n    }\n    catch (e) {\n        console.error(e);\n    }\n    ctx.restore();\n};\nexports.setContext = function (c) {\n    ctx = c || octx;\n};\nexports.translate = function (x, y) {\n    ctx && ctx.translate(x, y);\n};\nexports.renderHud = null;\nfunction cameraInitialized(_) {\n    cam = _;\n}\nexports.cameraInitialized = cameraInitialized;\nfunction mapInitialized(_) {\n    map = _;\n    map.init();\n}\nexports.mapInitialized = mapInitialized;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/mzengine/mzengine.ts\n ** module id = 1\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar ventanas = [];\nvar vPush = function (v) {\n    var ind = -1;\n    if ((ind = ventanas.indexOf(v)) != -1) {\n        ventanas.push(ventanas.splice(ind, 1)[0]);\n    }\n    else {\n        ventanas.push(v);\n    }\n};\nvar vPop = function (v) {\n    var ind = -1;\n    if ((ind = ventanas.indexOf(v)) != -1) {\n        ventanas.splice(ind, 1);\n    }\n};\nvar MzWindow = (function (_super) {\n    __extends(MzWindow, _super);\n    function MzWindow() {\n        _super.apply(this, arguments);\n        this.width = 0;\n        this.height = 0;\n        this.x = 0;\n        this.y = 0;\n    }\n    MzWindow.prototype.show = function () {\n        vPush(this);\n        this.trigger('show');\n    };\n    MzWindow.prototype.hide = function () {\n        vPop(this);\n        this.trigger('hide');\n    };\n    MzWindow.prototype.setSize = function (w, h) {\n        this.width = w | 0;\n        this.height = h | 0;\n        this.trigger('resize');\n    };\n    MzWindow.prototype.setPos = function (x, y) {\n        this.x = x | 0;\n        this.y = y | 0;\n    };\n    MzWindow.prototype.isVisible = function () {\n        return ventanas.indexOf(this) != -1;\n    };\n    return MzWindow;\n}(mz.EventDispatcher));\nexports.MzWindow = MzWindow;\nfunction render() {\n    ventanas.forEach(function (e) { e.render(); });\n}\nexports.render = render;\nfunction isVisible(window) {\n    return window && ventanas.indexOf(window) != -1;\n}\nexports.isVisible = isVisible;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/mzengine/window.ts\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar engine = require('../mzengine/mzengine');\nvar textures = require('../mzengine/textures');\nvar win = require('../mzengine/window');\nvar LoadingWindow = (function (_super) {\n    __extends(LoadingWindow, _super);\n    function LoadingWindow() {\n        _super.apply(this, arguments);\n        this.value = 0;\n        this.offX = 400;\n        this.offY = 300;\n    }\n    LoadingWindow.prototype.show = function () {\n        this.value = 0;\n        _super.prototype.show.call(this);\n    };\n    LoadingWindow.prototype.hide = function () {\n        this.value = 0;\n        _super.prototype.hide.call(this);\n    };\n    LoadingWindow.prototype.render = function () {\n        if (this.value) {\n            var that = this;\n            engine.renderThisUI(function (ctx) {\n                var circ = Math.PI * 2;\n                var quart = Math.PI / 2;\n                ctx.strokeStyle = '#FF1100';\n                ctx.lineCap = 'round';\n                ctx.lineWidth = 20.0;\n                ctx.beginPath();\n                ctx.arc(that.offX, that.offY, 150, -quart, circ * that.value - quart, false);\n                ctx.stroke();\n            });\n        }\n        engine.drawImage(textures.get('cdn/adz.png'), 80, 60, 640, 480);\n    };\n    LoadingWindow.prototype.setProgress = function (value, min) {\n        if (arguments.length == 2) {\n            this.value = min / value;\n        }\n        else {\n            this.value = value || 0;\n        }\n    };\n    return LoadingWindow;\n}(win.MzWindow));\nmodule.exports = new LoadingWindow;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/ui/loadingGame.ts\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\nvar mzengine = require('./mzengine');\nvar DB = {};\nvar that = mz.copy(new mz.EventDispatcher(), {\n    Textura: function (url, callback) {\n        var image = new Image();\n        image._loaded = { loaded: false };\n        image.queueOnLoaded = [];\n        image.addEventListener(\"load\", function () {\n            image._loaded.loaded = true;\n            that.trigger(url + '_loaded', image);\n            for (var i in image.queueOnLoaded)\n                image.queueOnLoaded[i](image, url);\n            image.queueOnLoaded = [];\n        }, false);\n        image.src = url;\n        image.onLoaded = function (cb) {\n            if (image._loaded.loaded)\n                cb(image, url);\n            else\n                image.queueOnLoaded.push(cb);\n        };\n        return image;\n    },\n    get: function (url) {\n        return url in DB ? DB[url] : (DB[url] = that.Textura(url));\n    },\n    require: function (list, cb, onProgress) {\n        var esperar = false;\n        var ct = list.length;\n        list.forEach(function (e) {\n            that.get(e).onLoaded(function (img, url) {\n                ct--;\n                onProgress && onProgress(list.length + 1, list.length - ct);\n                if (ct == 0)\n                    cb && cb();\n            });\n        });\n    },\n    Grh: function (tex, w, h, srcX, srcY) {\n        var t = that.get(tex);\n        var r = mz.copy(function (x, y) {\n            mzengine.drawImage(t, srcX, srcY, w, h, x, y, w, h);\n        }, {\n            halfCenterX: (w / 2 - 16) | 0,\n            halfCenterY: (h / 2 - 16) | 0,\n            halfCenterYv: (h - 16) | 0,\n            centrado: function (x, y) {\n                mzengine.drawImage(t, srcX, srcY, w, h, x - r.halfCenterX, y - r.halfCenterY, w, h);\n            },\n            vertical: function (x, y) {\n                mzengine.drawImage(t, srcX, srcY, w, h, x - r.halfCenterX, y - r.halfCenterYv, w, h);\n            },\n            width: w,\n            height: h,\n            texture: t,\n            get loaded() {\n                return t._loaded.loaded;\n            }\n        });\n        return r;\n    },\n    GrhFromCache: function (URL, cacheSize) {\n        var t = null;\n        if (typeof URL == 'object') {\n            t = URL;\n        }\n        else {\n            t = new Image();\n            t.src = URL;\n        }\n        var r = mz.copy(function (x, y) {\n            mzengine.drawImage(t, 0, 0, cacheSize, cacheSize, x, y, cacheSize, cacheSize);\n        }, {\n            objeto: t\n        });\n        return r;\n    }\n});\nmodule.exports = that;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/mzengine/textures.ts\n ** module id = 4\n ** module chunks = 0\n **/","\"use strict\";\nvar protocol_1 = require('../../../common/protocol');\nvar packets_1 = require('../../../common/packets');\nvar client = null;\nexports.tape = new protocol_1.WireProtocol.Tape();\nfunction connect(username) {\n    if (client && client.readyState == client.OPEN) {\n        console.error(\"[CLI] Alredy connected\");\n        return;\n    }\n    client = new WebSocket(\"ws://\" + location.host + \"/__c/\" + username);\n    exports.tape.emit(packets_1.PacketCodes.Disconnected.toString());\n    client.onclose = function () {\n        client = null;\n        exports.tape.emit(packets_1.PacketCodes.Disconnected.toString());\n    };\n    client.onopen = function () {\n        exports.tape.emit(packets_1.PacketCodes.Connected.toString());\n    };\n    client.onmessage = function (message) {\n        exports.tape.handlePacket(message.data);\n    };\n}\nexports.connect = connect;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/net/client.ts\n ** module id = 5\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar events_1 = require('events');\nvar packet_1 = require('./packet');\nvar WireProtocol;\n(function (WireProtocol) {\n    var Tape = (function (_super) {\n        __extends(Tape, _super);\n        function Tape() {\n            _super.apply(this, arguments);\n        }\n        Tape.prototype.handlePacket = function (raw) {\n            var packet = packet_1.SimplePacket.fromRaw(raw);\n            this.emit(packet.id.toString(), packet.data, packet);\n        };\n        return Tape;\n    }(events_1.EventEmitter));\n    WireProtocol.Tape = Tape;\n})(WireProtocol = exports.WireProtocol || (exports.WireProtocol = {}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./common/protocol.ts\n ** module id = 6\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/events/events.js\n ** module id = 7\n ** module chunks = 0\n **/","\"use strict\";\nvar packets_1 = require('./packets');\nvar SimplePacket = (function () {\n    function SimplePacket(id, data) {\n        this.id = id;\n        this.data = data;\n    }\n    SimplePacket.prototype.serialize = function () {\n        var raw = JSON.stringify({\n            id: this.id,\n            data: this.data\n        });\n        return raw;\n    };\n    SimplePacket.fromRaw = function (raw) {\n        try {\n            var parsed = JSON.parse(raw);\n            if (parsed.id) {\n                console.log('<<' + packets_1.PacketCodes[parsed.id] + ': ' + JSON.stringify(parsed.data));\n                return new SimplePacket(parsed.id, parsed.data);\n            }\n            else\n                throw new TypeError(\"Message doesn't contains 'id': \" + JSON.stringify(raw));\n        }\n        catch (e) {\n            console.error(\"ERROR PARSING MESSAGE\", e, raw);\n            throw new TypeError(\"Message doesn't contains 'id': \" + JSON.stringify(raw));\n        }\n    };\n    return SimplePacket;\n}());\nexports.SimplePacket = SimplePacket;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./common/packet.ts\n ** module id = 8\n ** module chunks = 0\n **/","\"use strict\";\n(function (PacketCodes) {\n    // Client messages\n    PacketCodes[PacketCodes[\"Disconnected\"] = 0] = \"Disconnected\";\n    PacketCodes[PacketCodes[\"Connected\"] = -1] = \"Connected\";\n    PacketCodes[PacketCodes[\"Login\"] = 1] = \"Login\";\n    PacketCodes[PacketCodes[\"Logout\"] = 2] = \"Logout\";\n    PacketCodes[PacketCodes[\"UseItem\"] = 3] = \"UseItem\";\n    PacketCodes[PacketCodes[\"Walk\"] = 4] = \"Walk\";\n    PacketCodes[PacketCodes[\"Talk\"] = 5] = \"Talk\";\n    // Server messages\n    PacketCodes[PacketCodes[\"UpdateChar\"] = 100] = \"UpdateChar\";\n    PacketCodes[PacketCodes[\"MoveChar\"] = 101] = \"MoveChar\";\n    PacketCodes[PacketCodes[\"SetMap\"] = 102] = \"SetMap\";\n    PacketCodes[PacketCodes[\"InventorySet\"] = 103] = \"InventorySet\";\n    PacketCodes[PacketCodes[\"UpdateStats\"] = 104] = \"UpdateStats\";\n    PacketCodes[PacketCodes[\"SetUserText\"] = 105] = \"SetUserText\";\n})(exports.PacketCodes || (exports.PacketCodes = {}));\nvar PacketCodes = exports.PacketCodes;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./common/packets.ts\n ** module id = 9\n ** module chunks = 0\n **/","\"use strict\";\nvar engine = require('../mzengine/mzengine');\nvar textures = require('../mzengine/textures');\nvar indexaciones = {};\nvar realizados = {};\nthis.loaded = false;\nexports.Grafico = function Grafico(base) {\n    this.frames = [];\n    if (base.l && base.l.length > 0) {\n        for (var i in base.l) {\n            this.frames.push(obtenerGrafico(base.l[i]));\n        }\n    }\n    else if (base.i) {\n        this.frames.push(obtenerGrafico(base.i));\n    }\n    this.width = this.frames[0].width;\n    this.height = this.frames[0].height;\n    this.centerX = (this.width / 2 - 16) | 0;\n    this.centerY = (this.height / 2 - 16) | 0;\n    this.framesCount = this.frames.length;\n    this.time = base.t;\n};\nexports.Grafico.prototype.frames = null;\nexports.Grafico.prototype.framesCount = null;\nexports.Grafico.prototype.time = null;\nexports.Grafico.prototype.startTime = null;\nexports.Grafico.prototype.width = 0;\nexports.Grafico.prototype.height = 0;\nexports.Grafico.prototype.centerX = 0;\nexports.Grafico.prototype.centerY = 0;\nexports.Grafico.prototype.quiet = function (x, y) {\n    // Renders the first frame of the graphic\n    this.framesCount && this.frames[0](x, y);\n};\nexports.Grafico.prototype.animated = function (x, y) {\n    // Renders the graphic animated if it has more tha one frame.\n    if (this.framesCount == 1)\n        return this.quiet(x, y);\n    return this.frames[(((engine.tick % (this.time || 200)) / (this.time || 200)) * this.framesCount | 0)](x, y);\n};\nexports.Grafico.prototype.quietVertical = function (x, y) {\n    // Renders the first frame of the graphic\n    this.framesCount && this.frames[0].vertical(x, y);\n};\nexports.Grafico.prototype.animatedVertical = function (x, y) {\n    // Renders the graphic animated if it has more tha one frame.\n    if (this.framesCount == 1)\n        return this.quietVertical(x, y);\n    var frame = Math.round(((engine.tick % (this.time || 200)) / (this.time || 200)) * this.framesCount) % this.framesCount;\n    return this.frames[frame] && this.frames[frame].vertical(x, y);\n};\nexports.Grafico.prototype.quietCentered = function (x, y) {\n    // Renders the first frame of the graphic\n    this.framesCount && this.frames[0].centrado(x, y);\n};\nexports.Grafico.prototype.animatedCentered = function (x, y) {\n    // Renders the graphic animated if it has more tha one frame.\n    if (this.framesCount == 1)\n        return this.quietCentered(x, y);\n    var frame = Math.round(((engine.tick % (this.time || 200)) / (this.time || 200)) * this.framesCount) % this.framesCount;\n    return this.frames[frame] && this.frames[frame].centrado(x, y);\n};\nfunction obtenerGrafico(index) {\n    if (index in indexaciones) {\n        var g = indexaciones[index];\n        if (g.g) {\n            return textures.Grh('cdn/grh/png/' + g.g + '.png', g.w, g.h, g.x, g.y);\n        }\n        else if (g.l) {\n            throw \"No se puede usar una animacion como frame de una animacion. frame=\" + index;\n        }\n    }\n    else\n        console.error(\"Grafico no indexado: \" + index);\n}\nexports.get = function (index) {\n    if (!(index in indexaciones))\n        throw \"Grafico \" + index + \" no indexado\";\n    return realizados[index] || (realizados[index] = new exports.Grafico(indexaciones[index]));\n};\nexports.indexarFrame = function (index, grafico, srcX, srcY, w, h) {\n    indexaciones[index] = {\n        g: grafico,\n        l: null,\n        t: null,\n        x: parseInt(srcX),\n        y: parseInt(srcY),\n        w: parseInt(w),\n        h: parseInt(h),\n        i: index\n    };\n};\nexports.indexarAnimacion = function (index, frames, tiempo) {\n    indexaciones[index] = {\n        g: null,\n        l: frames,\n        t: parseInt(tiempo || 200),\n        x: null,\n        y: null,\n        w: null,\n        h: null,\n        i: index\n    };\n};\nexports.loaded = null;\nexports.cargarGraficosRaw = function (url, cb) {\n    var grhHeader = /^Grh(\\d+)=1-(\\d+)-(\\d+)-(\\d+)-(\\d+)-(\\d+)/;\n    var animHeader = /^Grh(\\d+)=(\\d+)-(.*)-(.+)$/;\n    exports.loaded = false;\n    $.ajax({\n        url: url || 'cdn/indexes/graficos.txt',\n        method: 'GET',\n        success: function (e) {\n            var datos = e.split(/(\\n)/g);\n            for (var i in datos) {\n                var t = null, d = mz.trim(datos[i]);\n                if (d && d.length) {\n                    if (t = grhHeader.exec(d)) {\n                        exports.indexarFrame(t[1], t[2], t[3], t[4], t[5], t[6]);\n                    }\n                    else {\n                        if (t = animHeader.exec(d)) {\n                            exports.indexarAnimacion(t[1], t[3].split(/-/g), parseInt(t[4]));\n                        }\n                    }\n                }\n            }\n            exports.loaded = true;\n            cb && cb();\n        }\n    });\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/game/grh.ts\n ** module id = 10\n ** module chunks = 0\n **/","\"use strict\";\nvar grh = require('./grh');\nvar heads = require('./head');\nvar engine = require('../mzengine/mzengine');\nvar OFFSET_HEAD = -34;\nvar cuerpos = {};\nexports.Body = function Body() {\n};\nexports.Body.prototype.rightHand = null;\nexports.Body.prototype.leftHand = null;\nexports.Body.prototype.head = null;\nexports.Body.prototype.helmet = null;\nexports.Body.prototype.aura = null;\nexports.Body.prototype.heading = 1;\nexports.Body.prototype.grhs = null;\nexports.Body.prototype.name = null;\nexports.Body.prototype.headOffsetX = 0;\nexports.Body.prototype.headOffsetY = 0;\nexports.Body.prototype.setHead = function (headIndex) {\n    this.head = heads.get(headIndex);\n};\nexports.Body.prototype.setHelmet = function (headIndex) {\n    this.helmet = heads.getHelmet(headIndex);\n};\nexports.Body.prototype.setBody = function (bodyIndex) {\n    this.grhs = null;\n    this.headOffsetX = 0;\n    this.headOffsetY = 0;\n    if (bodyIndex in cuerpos) {\n        this.headOffsetX = cuerpos[bodyIndex].hX;\n        this.headOffsetY = cuerpos[bodyIndex].hY;\n        this.grhs = {\n            0: grh.get(cuerpos[bodyIndex].g[1]),\n            1: grh.get(cuerpos[bodyIndex].g[2]),\n            2: grh.get(cuerpos[bodyIndex].g[3]),\n            3: grh.get(cuerpos[bodyIndex].g[4])\n        };\n    }\n};\nexports.Body.prototype.render = function (x, y, heading, anim, animEscudo) {\n    this.heading = heading | 0;\n    this.aura && this.aura.centered(x, y);\n    this.grhs && this.grhs[this.heading] && this.grhs[this.heading][anim ? 'animatedVertical' : 'quietVertical'](x, y);\n    this.head && this.head && this.head.render(x + this.headOffsetX, y + this.headOffsetY + OFFSET_HEAD, this.heading);\n    this.helmet && this.helmet && this.helmet.render(x + this.headOffsetX, y + OFFSET_HEAD + this.headOffsetY, this.heading);\n    this.rightHand && this.rightHand[this.heading] && this.rightHand[this.heading][animEscudo ? 'animatedVertical' : 'quietVertical'](x, y);\n    this.leftHand && this.leftHand[this.heading] && this.leftHand[this.heading][animEscudo ? 'animatedVertical' : 'quietVertical'](x, y);\n    this.name && engine.renderTextCentered(this.name, x + 16, y + 24);\n};\nexports.loadRaw = function (url, cb) {\n    var bodyHeader = /\\[BODY(\\d+)\\]/;\n    var grhHeader = /WALK(1|2|3|4)=(\\d+)/;\n    var headOffsetHeaderX = /HeadOffsetX=(.+)/;\n    var headOffsetHeaderY = /HeadOffsetY=(.+)/;\n    this.loaded = false;\n    $.ajax({\n        url: url || 'cdn/indexes/cuerpos.txt',\n        method: 'GET',\n        success: function (e) {\n            var datos = e.split(/(\\n)/g);\n            var cuerpoActual = null;\n            for (var i in datos) {\n                var t = void 0;\n                if (t = bodyHeader.exec(datos[i])) {\n                    cuerpoActual = {\n                        g: { 1: 0, 2: 0, 3: 0, 4: 0 },\n                        hX: 0,\n                        hY: 0,\n                        i: t[1]\n                    };\n                    cuerpos[t[1]] = cuerpoActual;\n                }\n                else if (t = grhHeader.exec(datos[i])) {\n                    cuerpoActual && (cuerpoActual.g[t[1]] = parseInt(t[2]));\n                }\n                else if (t = headOffsetHeaderX.exec(datos[i])) {\n                    cuerpoActual && (cuerpoActual.hX = parseInt(t[1]));\n                }\n                else if (t = headOffsetHeaderY.exec(datos[i])) {\n                    cuerpoActual && (cuerpoActual.hY = parseInt(t[1]));\n                }\n            }\n            //console.log(cuerpos)\n            exports.loaded = true;\n            cb && cb();\n        }\n    });\n};\nexports.loaded = false;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/game/body.ts\n ** module id = 11\n ** module chunks = 0\n **/","\"use strict\";\nvar grh = require('./grh');\nvar DB = {};\nvar DBHelmets = {};\nvar heads = {};\nvar helmets = {};\nexports.Head = function Head(head) {\n    this.grh = {\n        0: grh.get(head.g[1]),\n        1: grh.get(head.g[2]),\n        2: grh.get(head.g[3]),\n        3: grh.get(head.g[4])\n    };\n};\nexports.Head.prototype.grh = null;\nexports.Head.prototype.render = function (x, y, heading) {\n    this.grh && this.grh[heading] && this.grh[heading].quiet(x - this.grh[heading].centerX, y);\n};\nexports.Head.prototype.renderBottomAligned = function (x, y, heading) {\n    this.grh && this.grh[heading] && this.grh[heading].quiet(x - this.grh[heading].centerX, y - this.grh[heading].height);\n};\nexports.get = function (index) {\n    return heads[index] && (DB[index] = DB[index] || new exports.Head(heads[index])) || null;\n};\nexports.getHelmet = function (index) {\n    return helmets[index] && (DBHelmets[index] = DBHelmets[index] || new exports.Head(helmets[index])) || null;\n};\nfunction parseInto(obj, e) {\n    var headHeader = /\\[HEAD(\\d+)\\]/;\n    var grhHeader = /Head(1|2|3|4)=(\\d+)/;\n    var data = e.split(/(\\n)/g);\n    var actualHead = null;\n    for (var i in data) {\n        var d = mz.trim(data[i]);\n        var t = void 0;\n        if (t = headHeader.exec(d)) {\n            actualHead = {\n                g: { 1: 0, 2: 0, 3: 0, 4: 0 },\n                i: t[1]\n            };\n            obj[t[1]] = actualHead;\n        }\n        else if (t = grhHeader.exec(d)) {\n            actualHead && (actualHead.g[t[1]] = parseInt(t[2]));\n        }\n    }\n}\nexports.loadHeadsRaw = function (url, cb) {\n    $.ajax({\n        url: url || 'cdn/indexes/cabezas.txt',\n        method: 'GET',\n        success: function (e) {\n            parseInto(heads, e);\n            cb && cb();\n        }\n    });\n};\nexports.loadHelmetsRaw = function (url, cb) {\n    $.ajax({\n        url: url || 'cdn/indexes/cascos.txt',\n        method: 'GET',\n        success: function (e) {\n            parseInto(helmets, e);\n            cb && cb();\n        }\n    });\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/game/head.ts\n ** module id = 12\n ** module chunks = 0\n **/","\"use strict\";\nvar input_1 = require('../mzengine/input');\nvar Camera = require('../mzengine/camera');\nvar Heading = null;\nvar HeadingHist = [0, 1, 2, 3];\nvar Teclas = ['40', '39', '38', '37'];\nvar ultimoHeading = null;\ninput_1.KeyStates.on('37', function (b) {\n    ultimoHeading != Heading && (ultimoHeading = Heading);\n    Heading = 3;\n});\ninput_1.KeyStates.on('38', function (b) {\n    ultimoHeading != Heading && (ultimoHeading = Heading);\n    Heading = 2;\n});\ninput_1.KeyStates.on('39', function (b) {\n    ultimoHeading != Heading && (ultimoHeading = Heading);\n    Heading = 1;\n});\ninput_1.KeyStates.on('40', function (b) {\n    ultimoHeading != Heading && (ultimoHeading = Heading);\n    Heading = 0;\n});\nCamera.bindFn(function () {\n    if (!Camera.isMoving()) {\n        if (!input_1.KeyStates.check(Teclas[Heading])) {\n            if (input_1.KeyStates.check(Teclas[ultimoHeading])) {\n                var t = ultimoHeading;\n                ultimoHeading != Heading && (ultimoHeading = Heading);\n                Heading = t;\n            }\n            else if (input_1.KeyStates.check(Teclas[0])) {\n                ultimoHeading != Heading && (ultimoHeading = Heading);\n                Heading = 0;\n            }\n            else if (input_1.KeyStates.check(Teclas[1])) {\n                ultimoHeading != Heading && (ultimoHeading = Heading);\n                Heading = 1;\n            }\n            else if (input_1.KeyStates.check(Teclas[2])) {\n                ultimoHeading != Heading && (ultimoHeading = Heading);\n                Heading = 2;\n            }\n            else if (input_1.KeyStates.check(Teclas[3])) {\n                ultimoHeading != Heading && (ultimoHeading = Heading);\n                Heading = 3;\n            }\n            else {\n                Heading = null;\n            }\n        }\n        if (Heading != null) {\n            Camera.Mover(Heading);\n        }\n    }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/game/input.ts\n ** module id = 13\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar keyStateObserver = (function (_super) {\n    __extends(keyStateObserver, _super);\n    function keyStateObserver() {\n        var _this = this;\n        _super.call(this);\n        this.keyStates = {};\n        $(document).keydown(function (e) { return _this.keyDown(e.keyCode.toString()); });\n        $(document).keyup(function (e) { return _this.keyUp(e.keyCode.toString()); });\n    }\n    keyStateObserver.prototype.keyDown = function (cual) {\n        this.keyStates[cual] = true;\n        this.emit(cual, true);\n    };\n    keyStateObserver.prototype.keyUp = function (cual) {\n        this.keyStates[cual] = false;\n        this.emit(cual, false);\n    };\n    keyStateObserver.prototype.check = function (cual) {\n        return !!this.keyStates[cual];\n    };\n    return keyStateObserver;\n}(mz.EventDispatcher));\nexports.KeyStates = new keyStateObserver;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/mzengine/input.ts\n ** module id = 14\n ** module chunks = 0\n **/","\"use strict\";\nvar engine = require('./mzengine');\nvar x = 0, y = 0;\nvar width = 0, height = 0, ctx = null;\nvar _moviendo = false, AddX = 0, AddY = 0, _continuar = false;\nvar UltimoHeading = -1;\nvar VelCamara = 192 / 1000;\nexports.boundingBox = {\n    minX: 0,\n    minY: 0,\n    maxX: 0,\n    maxY: 0\n};\nexports.pos = { x: 0, y: 0 };\nvar _check_camera = null;\nexports.bindFn = function (cb) {\n    _check_camera = cb || null;\n};\nexports.setSpeed = function (freq) {\n    exports.velCamara = VelCamara = freq || 192 / 1000;\n};\nexports.velCamara = VelCamara;\nvar map = require('./map');\nexports.update = function (elapsedTime) {\n    if (!map)\n        return;\n    if (_moviendo) {\n        if (AddX > 0) {\n            AddX -= elapsedTime * VelCamara;\n            if (AddX <= 0) {\n                _moviendo = false;\n            }\n        }\n        if (AddX < 0) {\n            AddX += elapsedTime * VelCamara;\n            if (AddX >= 0) {\n                _moviendo = false;\n            }\n        }\n        if (AddY > 0) {\n            AddY -= elapsedTime * VelCamara;\n            if (AddY <= 0) {\n                _moviendo = false;\n            }\n        }\n        if (AddY < 0) {\n            AddY += elapsedTime * VelCamara;\n            if (AddY >= 0) {\n                _moviendo = false;\n            }\n        }\n        if (!_moviendo) {\n            _check_camera && _check_camera();\n            if (!_moviendo) {\n                AddY = 0;\n                AddX = 0;\n            }\n        }\n    }\n    else\n        _check_camera && _check_camera();\n    exports.boundingBox.minX = Math.max(Math.round(x - 50 - 2), 0);\n    exports.boundingBox.minY = Math.max(Math.round(y - 38 - 2), 0);\n    exports.boundingBox.maxX = Math.min(Math.round(x + 50 + 2), map.mapSize);\n    exports.boundingBox.maxY = Math.min(Math.round(y + 38 + 2), map.mapSize);\n    exports.pos.x = (x * 32 - AddX) | 0;\n    exports.pos.y = (y * 32 - AddY) | 0;\n    engine.translate(-exports.pos.x - 16 + 400 | 0, -exports.pos.y - 16 + 300);\n};\nexports.unstranslate = function () {\n    engine.translate(exports.pos.x + 16 - 400 | 0, exports.pos.y + 16 - 300);\n};\nexports.Mover = function (heading) {\n    if (!_moviendo) {\n        switch (heading) {\n            case 0:\n                AddY += 32;\n                AddX = 0;\n                y++;\n                break;\n            case 1:\n                AddX += 32;\n                AddY = 0;\n                x++;\n                break;\n            case 2:\n                AddY -= 32;\n                AddX = 0;\n                y--;\n                break;\n            case 3:\n                AddX -= 32;\n                AddY = 0;\n                x--;\n                break;\n        }\n        exports.observable.trigger('moveByHead', heading, x, y);\n        exports.observable.trigger('position', x, y, exports.pos);\n    }\n    _moviendo = true;\n};\nexports.setPos = function (_x, _y) {\n    x = _x | 0;\n    y = _y | 0;\n    AddY = AddX = 0;\n    _moviendo = false;\n    exports.pos.x = (x * 32 - AddX) | 0;\n    exports.pos.y = (y * 32 - AddY) | 0;\n};\nexports.isMoving = function () { return _moviendo; };\nexports.getPos = function () {\n    return {\n        x: exports.pos.x,\n        y: exports.pos.y\n    };\n};\nexports.observable = new mz.EventDispatcher();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/mzengine/camera.ts\n ** module id = 15\n ** module chunks = 0\n **/","\"use strict\";\n//define(['js/adz/mzengine/mzengine', 'js/adz/mzengine/camera', 'js/adz/mzengine/textures'], function(engine, Camera, textures){\t\nvar engine = require('./mzengine');\nvar Camera = require('./camera');\nvar textures = require('./textures');\nvar that = this;\nthat.Tile = function Tile() {\n};\nthat.Tile.prototype.piso = null;\nthat.Tile.prototype.capa1 = null;\nthat.Tile.prototype.capa2 = null;\nthat.Tile.prototype.capa3 = null;\nthat.Tile.prototype.capa4 = null;\nthat.Tile.prototype.char = null;\nvar cacheTileSize = 16;\nvar TileSize = 32;\nvar cacheSize = cacheTileSize * TileSize;\nvar mapSize = 250;\nvar cacheando = false;\nvar cacheMax = 1;\nvar cacheValue = 0;\nvar areasCache = null;\nvar Tileset = {};\nvar mapData = [];\nfunction armarCapas(w, h) {\n    for (var x = 0; x < w; x++) {\n        mapData[x] = new Array(h);\n        for (var y = 0; y < h; y++) {\n            mapData[x][y] = new that.Tile;\n        }\n    }\n}\nvar boundingBox = Camera.boundingBox;\nvar tilesetsPedidas = 0;\nvar tilesetsCargadas = 0;\nvar recachearmapa = mz.delayer(function (cb) {\n    if (tilesetsPedidas == tilesetsCargadas) {\n        cachearMapa(cb);\n    }\n}, 500);\nvar tilesetLoaded = function () {\n    tilesetsCargadas++;\n    //console.log(tilesetsPedidas, tilesetsCargadas);\n    recachearmapa();\n};\nvar loadTileset = function (tileset, url) {\n    Tileset[tileset] = [];\n    //Tileset[tileset].url = url;\n    tilesetsPedidas++;\n    //textures.once(url + '_loaded', tilesetLoaded);\n    var ct = 0;\n    for (var y = 0; y < 16; y++) {\n        for (var x = 0; x < 32; x++) {\n            Tileset[tileset].push(textures.Grh(url, TileSize, TileSize, x * TileSize, y * TileSize));\n        }\n        ;\n    }\n    ;\n    textures.get(url).onLoaded(function () {\n        tilesetsCargadas++;\n        //console.log(tilesetsPedidas, tilesetsCargadas);\n        recachearmapa();\n    });\n};\nvar tamanioCache = 0;\nfunction cachearSeccion(Cx, Cy) {\n    var canvasCache = document.createElement('canvas'), ctCache = canvasCache.getContext('2d');\n    canvasCache.width = cacheSize;\n    canvasCache.height = cacheSize;\n    engine.setContext(ctCache);\n    var c = {\n        minX: Cx * cacheTileSize,\n        minY: Cy * cacheTileSize,\n        maxX: Math.min((Cx + 1) * cacheTileSize, mapSize),\n        maxY: Math.min((Cy + 1) * cacheTileSize, mapSize)\n    };\n    var tX = 0, tY = 0;\n    for (var x = c.minX; x < c.maxX; x++) {\n        for (var y = c.minY; y < c.maxY; y++) {\n            mapData[x][y] && mapData[x][y].piso && mapData[x][y].piso(tX, tY);\n            tY += TileSize;\n        }\n        ;\n        tY = 0;\n        tX += TileSize;\n    }\n    ;\n    tX = 0;\n    tY = 0;\n    if (c.minX / cacheTileSize > 1) {\n        c.minX -= 1;\n        tX -= TileSize;\n    }\n    if (c.minY / cacheTileSize > 1) {\n        c.minY -= 1;\n        tY -= TileSize;\n    }\n    if (c.maxX < mapSize)\n        c.maxX += 1;\n    if (c.maxY < mapSize)\n        c.maxY += 1;\n    for (var y = c.minY; y < c.maxY; y++) {\n        for (var x = c.minX; x < c.maxX; x++) {\n            mapData[x][y] && mapData[x][y].capa1 && mapData[x][y].capa1(tX, tY);\n            mapData[x][y] && mapData[x][y].capa2 && mapData[x][y].capa2.centrado(tX, tY);\n            tY += TileSize;\n        }\n        ;\n        tY = 0;\n        tX += TileSize;\n    }\n    ;\n    engine.setContext(null);\n    return textures.GrhFromCache(canvasCache /*canvasCache.toDataURL(\"image/png\")*/, cacheSize);\n}\nvar cachearMapa = function (cb) {\n    tamanioCache = Math.ceil(mapSize / cacheTileSize);\n    if (areasCache == null) {\n        areasCache = new Array(tamanioCache + 1);\n        for (var y = 0; y <= tamanioCache; y++) {\n            areasCache[y] = new Array(tamanioCache + 1);\n        }\n    }\n    cacheMax = tamanioCache * tamanioCache, cacheValue = 0;\n    cacheando = true;\n    for (var Cy = 0; Cy < tamanioCache; Cy++) {\n        for (var Cx = 0; Cx < tamanioCache; Cx++) {\n            setTimeout(function (Cx, Cy, areasCache) {\n                areasCache[Cx][Cy] = cachearSeccion(Cx, Cy);\n                cacheValue++;\n                //console.log('CargandoMapa: ' + cacheValue + '/' + cacheMax, Cx, Cy);\n                cacheando = cacheValue != cacheMax;\n                cacheando || cb && cb();\n            }, 0, Cx, Cy, areasCache);\n        }\n        ;\n    }\n    ;\n};\nvar chars = null;\nmodule.exports = {\n    tileSize: TileSize,\n    mapSize: mapSize,\n    init: function () {\n        armarCapas(mapSize, mapSize);\n        //this.loadMap();\n    },\n    render: function (elapsedTime) {\n        if (cacheando) {\n            engine.renderThisUI(function (ctx) {\n                var circ = Math.PI * 2;\n                var quart = Math.PI / 2;\n                ctx.strokeStyle = '#CC9933';\n                ctx.lineCap = 'square';\n                ctx.lineWidth = 10.0;\n                ctx.beginPath();\n                ctx.arc(400, 300, 70, -quart, circ * (cacheValue / cacheMax) - quart, false);\n                ctx.stroke();\n            });\n            return;\n        }\n        var minX = boundingBox.minX - cacheTileSize;\n        var minY = boundingBox.minY - cacheTileSize;\n        for (var x = 0; x < tamanioCache; x++) {\n            for (var y = 0; y < tamanioCache; y++) {\n                var tX = x * cacheTileSize;\n                var tY = y * cacheTileSize;\n                if (tX < boundingBox.minX || tX > boundingBox.maxX || tY < boundingBox.minY || tY > boundingBox.maxY)\n                    continue;\n                areasCache[x][y] && areasCache[x][y](x * cacheSize, y * cacheSize);\n            }\n            ;\n        }\n        for (var y_1 = boundingBox.minY; y_1 < boundingBox.maxY; y_1++) {\n            for (var x_1 = boundingBox.minX; x_1 < boundingBox.maxX; x_1++) {\n                mapData[x_1][y_1].capa3 && mapData[x_1][y_1].capa3.vertical(x_1 * TileSize, y_1 * TileSize);\n            }\n            ;\n        }\n        chars = chars || require('../game/char') && require('../game/char').chars;\n        chars && chars.forEach(function (e) {\n            /*if(e === myChar){\n                var camPos = Camera.pos;//Camera.getPos();\n                e.render(elapsedTime, camPos.x, camPos.y);\n            } else*/\n            e.render(elapsedTime);\n        });\n    },\n    loadMap: function (data, cb) {\n        cacheando = true;\n        cacheMax = 1;\n        cacheValue = 0;\n        var listaGraficos = [\n            'cdn/grh/tilesets/1.png'\n        ];\n        textures.require(listaGraficos, function () {\n            loadTileset(0, 'cdn/grh/tilesets/1.png');\n            armarCapas(mapSize, mapSize);\n            for (var x = 0; x < mapSize; x++) {\n                for (var y = 0; y < mapSize; y++) {\n                    mapData[x][y].piso = Tileset[0][x % 4 + (y % 4) * 32];\n                }\n            }\n            /*\n                            for(var i = 1; i < 100; i++){\n                                mapData[(Math.random() * 50) | 0][(Math.random() * 50) | 0].capa1 =  Tileset[1][48 + (Math.random() * 16) | 0];\n                                mapData[(Math.random() * 50) | 0][(Math.random() * 50) | 0].capa2 =  Tileset[1][15];\n                            }\n            \n                            mapData[0][0].capa3 =  textures.Grh('cdn/grh/png/7001.png',256,256,0,0,1);\n            \n                            for(var i = 1; i < 20; i++){\n                                mapData[(Math.random() * 50) | 0][(Math.random() * 50) | 0].capa3 =  textures.Grh('cdn/grh/png/7001.png',256,256,0,0,1);\n                            }\n                            */\n            recachearmapa(cb);\n        }, function progreso(total, cantidad) {\n            cacheMax = total;\n            cacheValue = cantidad;\n        });\n    }\n};\n//}) \n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/mzengine/map.ts\n ** module id = 16\n ** module chunks = 0\n **/","\"use strict\";\nvar map = require('../mzengine/map');\nvar bodies = require('./body');\nvar Camera = require('../mzengine/camera');\nexports.mainChar = null;\nexports.BodyFactory = (function () {\n    return function (body, head, alto) {\n        var _x = 0;\n        var _y = 0;\n        var AddX = 0, AddY = 0;\n        var _heading = 0;\n        var enMovimiento = false;\n        //console.log(bodies)\n        var Body = new bodies.Body();\n        Body.setBody(body);\n        Body.setHead(head);\n        return {\n            body: Body,\n            render: function (elapsedTime, x, y) {\n                if (arguments.length == 1) {\n                    x = _x * map.tileSize - AddX;\n                    y = _y * map.tileSize - AddY;\n                }\n                if (this == exports.mainChar) {\n                    x = Camera.pos.x;\n                    y = Camera.pos.y;\n                }\n                if (AddX > 0) {\n                    AddX -= elapsedTime * Camera.velCamara;\n                    if (AddX <= 0) {\n                        enMovimiento = false;\n                    }\n                }\n                if (AddX < 0) {\n                    AddX += elapsedTime * Camera.velCamara;\n                    if (AddX >= 0) {\n                        enMovimiento = false;\n                    }\n                }\n                if (AddY > 0) {\n                    AddY -= elapsedTime * Camera.velCamara;\n                    if (AddY <= 0) {\n                        enMovimiento = false;\n                    }\n                }\n                if (AddY < 0) {\n                    AddY += elapsedTime * Camera.velCamara;\n                    if (AddY >= 0) {\n                        enMovimiento = false;\n                    }\n                }\n                /*\n                var tmpx = x - ((AnchoCuerpos / 2) | 0) + 16;\n                var tmpy = y - AltoCuerpos + 16;\n\n                \n                this.body[_heading][\n                    !enMovimiento ? 0 : ((engine.tick / 60) | 0) % this.body[_heading].length\n                ](tmpx,tmpy);\n\n                this.head[_heading](x + 8,tmpy - 8);\n                */\n                this.body && this.body.render(x, y, _heading, enMovimiento);\n            },\n            setPos: function (x, y) {\n                enMovimiento = false;\n                _x = x;\n                _y = y;\n                AddX = 0;\n                AddY = 0;\n            },\n            moveByHead: function (heading) {\n                switch (heading) {\n                    case 0:\n                        AddY = map.tileSize;\n                        AddX = 0;\n                        _y++;\n                        break;\n                    case 1:\n                        AddX = map.tileSize;\n                        AddY = 0;\n                        _x++;\n                        break;\n                    case 2:\n                        AddY = -map.tileSize;\n                        AddX = 0;\n                        _y--;\n                        break;\n                    case 3:\n                        AddX = -map.tileSize;\n                        AddY = 0;\n                        _x--;\n                        break;\n                }\n                _heading = heading;\n                enMovimiento = true;\n            },\n            frenar: function () {\n                enMovimiento = false;\n                AddX = 0;\n                AddY = 0;\n            },\n            enMovimiento: function () { return enMovimiento; },\n            setHeading: function (heading) {\n                _heading = heading;\n            }\n        };\n    };\n})();\nexports.render = function (x, y) {\n};\nexports.chars = [];\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/game/char.ts\n ** module id = 17\n ** module chunks = 0\n **/","\"use strict\";\nvar engine = require('../mzengine/mzengine');\nvar tex = require('../mzengine/textures');\nvar lg = require('../ui/loadingGame');\nvar hotBar = tex.Grh('cdn/ui/hotbar.png', 400, 64, 0, 0);\nvar barras = tex.Grh('cdn/ui/barras.png', 200, 64, 0, 0);\nvar frameInterno = tex.Grh('cdn/ui/frameinterno.png', 800, 600, 0, 0);\nengine.renderHud = function () {\n    if (lg.isVisible())\n        return;\n    frameInterno(0, 0);\n    hotBar(200, 600 - 64);\n    barras(600, 600 - 64);\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/adz/game/hud.ts\n ** module id = 18\n ** module chunks = 0\n **/"],"sourceRoot":""}